# Telegram Bot Token (required)
TOKEN = your_telegram_bot_token_here

# Base URL for Telegram Bot API (optional, defaults to https://api.telegram.org)
BASE_URL = https://api.telegram.org

# Log Level (optional, defaults to 'info' in production, 'debug' in development)
# Available levels: none, debug, info, warn, error, fatal
LOG_LEVEL = info

# Log Template (optional, customize log output format)
# Default: [{level}: {module}]: {message}
# Available placeholders:
#   {level}       - Log level (DEBUG, INFO, WARN, ERROR, FATAL)
#   {module}      - Module name (e.g., "Main", "WorkerPool")
#   {message}     - The log message
#   {timestamp}   - Current date/time (DD/MM/YYYY HH:mm:ss)
#   {timestamp(unix)}    - Unix timestamp with milliseconds (e.g., 1707312345.123)
#   {timestamp(ISO)}     - ISO 8601 format (e.g., 2024-02-07T12:39:05.123Z)
#   {timestamp(datetime)} - Same as {timestamp}, DD/MM/YYYY HH:mm:ss format
#   {cid}         - Correlation ID for tracing operations (short format: abc123-def456)
#   {cid:short}   - Same as {cid}
#   {cid:full}    - Correlation ID with "no-correlation-id" fallback when not in operation context
# Examples:
#   LOG_TEMPLATE=[{timestamp}] [{level}: {module}] [{cid}]: {message}
#   LOG_TEMPLATE={timestamp(ISO)} [{level}] {module}: {message}
LOG_TEMPLATE = [{level}: {module}][{cid:full}]: {message}

# Environment (optional, affects default log level)
# Set to 'production' for production environment
NODE_ENV = development

# Worker Pool Size (optional, defaults to 4)
# Number of worker threads for regex processing (range: >1)
# Only applies to Worker Pool V1
WORKER_POOL_SIZE = 4

# Worker Pool V2 - Dynamic Scaling (optional, defaults to false)
# Enable the new dynamic worker pool with auto-scaling
# When enabled, WORKER_POOL_SIZE is ignored
WORKER_POOL_V2_ENABLED = false

# Worker Pool V2 Configuration (only used when WORKER_POOL_V2_ENABLED=true)
# Minimum workers to keep (even when idle) - default: 0
WORKER_POOL_MIN_WORKERS = 0

# Maximum workers allowed - default: 8
WORKER_POOL_MAX_WORKERS = 8

# Initial workers to spawn on startup - default: 1
WORKER_POOL_INITIAL_WORKERS = 1

# Idle timeout before scaling down (milliseconds) - default: 15 minutes
WORKER_POOL_IDLE_TIMEOUT_MS = 900000

# How often to check for idle workers (milliseconds) - default: 5 minutes
WORKER_POOL_IDLE_CHECK_INTERVAL_MS = 300000

# Worker Timeout in milliseconds (optional, defaults to 60000)
# Maximum time a regex operation can run before being terminated (range: 1000-300000)
WORKER_TIMEOUT_MS = 60000

# Graceful Drain on Shutdown (optional, defaults to false)
# When enabled, the bot will drain pending tasks before shutting down
# This queues updates and processes them instead of rejecting immediately
# Useful for deployments where you don't want to lose pending operations
# WARNING: Must complete within Docker's grace period (default 10s) or SIGKILL will occur
# Adjust GRACEFUL_DRAIN_TIMEOUT_MS if your Docker container has a different grace period
GRACEFUL_DRAIN = false

# Graceful Drain Timeout in milliseconds (optional, defaults to 8000)
# Maximum time to spend draining the queue during shutdown
# Must be less than Docker's grace period (default 10s = 10000ms)
# Range: 1000-9500 (to fit within Docker's default grace period)
GRACEFUL_DRAIN_TIMEOUT_MS = 8000

# Rate Limiting (optional, defaults to enabled)
# Enable per-user rate limiting to prevent spam and abuse
# Limits how many commands a user can send per minute
RATE_LIMIT_ENABLED = true

# Rate Limit Commands Per Minute (optional, defaults to 30)
# Maximum number of commands a user can send per minute
# Range: 1-300
RATE_LIMIT_COMMANDS_PER_MINUTE = 30

# Caching (optional, defaults to enabled)
# Enable LRU caching for compiled regex patterns and other data
CACHE_ENABLED = true

# Cache Max Size (optional, defaults to 1000)
# Maximum number of entries in the LRU cache
# Range: 100-10000
CACHE_MAX_SIZE = 1000

# Cache TTL in milliseconds (optional, defaults to 300000 = 5 minutes)
# How long cached items remain valid before being considered stale
# Range: 60000-600000 (1 minute to 10 minutes)
CACHE_TTL_MS = 300000

# Maximum Chain Length (optional, defaults to 5)
# Maximum number of sed commands that can be chained (range: 1-50)
MAX_CHAIN_LENGTH = 5

# Maximum Message Length (optional, defaults to 4096)
# Maximum length of the bot's response message (range: 100-10000)
MAX_MESSAGE_LENGTH = 4096

# Cleanup Interval in milliseconds (optional, defaults to 48 hours)
# How often to clean up old message history (range: 1 hour - 7 days)
CLEANUP_INTERVAL_MS = 172800000

# Maximum History Per Chat (optional, defaults to 20)
# Maximum number of messages to keep in history per chat (range: 5-200)
MAX_HISTORY_PER_CHAT = 20

# History Query Limit (optional, defaults to 10)
# Maximum number of messages to search when finding a target (range: 1-100)
HISTORY_QUERY_LIMIT = 10

# Retry Max Retries (optional, defaults to 3)
# Maximum number of retries for Telegram API calls (range: 0-10)
RETRY_MAX_RETRIES = 3

# Retry Max Delay in milliseconds (optional, defaults to 30000)
# Maximum delay between retries for Telegram API calls (range: 1000-300000)
RETRY_MAX_DELAY_MS = 30000

# Enable File Healthcheck (optional, defaults to false)
# Enable file-based healthcheck for Docker environments
ENABLE_FILE_HEALTHCHECK = false

# Liveness File Path (optional, defaults to /tmp/bot-alive)
# Path to the liveness file when healthcheck is enabled
LIVENESS_FILE = /tmp/bot-alive

# Liveness Interval in milliseconds (optional, defaults to 30000)
# How often to update the liveness file (range: 5000-300000)
LIVENESS_INTERVAL_MS = 30000
